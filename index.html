<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
	<title>Gallery Deluxe</title>
	<meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
	<link rel="stylesheet" type="text/css" href="css/style.css">

    <script>
		var context;
		var x=100;
		var y=200;
		var dx=5;
		var dy=5;

		function init()
		{
		  context= document.getElementById('myCanvas').getContext('2d');
		  setInterval(draw,10);
		}

		function draw()
		{
		  context.clearRect(0,0, 300,300);
		  context.beginPath();
		  context.fillStyle="#0000ff";
		  // Draws a circle of radius 20 at the coordinates 100,100 on the canvas
		  context.arc(x,y,20,0,Math.PI*2,true);
		  context.closePath();
		  context.fill();

		  if( x<20 || x>280) dx=-dx;
		  if( y<20 || y>280) dy=-dy;
		  x+=dx;
		  y+=dy;
		}

	</script>
	</head>
	<body onLoad="init();">
		<header>
			Gallery Deluxe
		</header>
		<section id="debug">
			<div id="ratio"></div>
		</section>
		<section id="content">
			<canvas id="myCanvas" style="margin-left:50px;margin-top:50px" width="300" height="300" ></canvas>
			<div id="install_button" style="display:none;position:absolute;left:750px;width:140px;top:100px;">
			    INSTALL
			</div>
		</section>
		<footer>
			This is a footer
		</footer>
		<script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="js/index.js"></script>		
		<script type="text/javascript" src="js/script.js"></script>
		<script type="text/javascript">
            app.initialize();
        </script>

		<script>

		var gManifestName = "/manifest.webapp";

		$(document).ready(function() {
		  var request = navigator.mozApps.getSelf();
			request.onsuccess = function() {
			  if (request.result) {
			    // we're installed
			    $("#install_button").text("INSTALLED!").show();
			  } else {
			    // not installed
			    $("#install_button").show();
		            $("#install_button").click(function() {
				var req = navigator.mozApps.install(gManifestName);
				req.onsuccess = function() {
		                    $("#install_button").text("INSTALLED!").unbind('click');
		                }
				req.onerror = function(errObj) {
		                    alert("Couldn't install (" + errObj.code + ") " + errObj.message);
		                }
		            });
			  }
			}
			request.onerror = function() {
			  alert('Error checking installation status: ' + this.error.message);
			}
		});

		</script>
		
		<div id="fullscreen">
			<div id="fullscreen-image-container">
				<canvas id="fullscreen-img"></canvas>
				<!-- <canvas id="fullscreen-img2"></canvas> -->
			</div>
			<div id="image-panel">
				<button id="rotate-left">Rotate left</button>
				<button id="rotate-right">Rotate right</button>
				<button id="invert">Invert</button>
			</div>
		</div>
	</body>
</html>
